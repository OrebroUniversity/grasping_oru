<?xml version="1.0"?>
<launch>

  <include file="$(find hiqp_demos)/launch/yumi_simulation.launch"/>

  <!-- <node name="rviz" pkg="rviz" type="rviz" args="-d $(find grasp_learning)/launch/demo.rviz"/> -->

  <!--node name="yumi_collision" pkg="yumi_collision" type="yumi_collision_node"/-->

  <node name="RBFNetwork" pkg="grasp_learning" type="RBFNetwork" output="screen" launch-prefix="terminator -mx">

   <param name="num_kernels" value="24"/> <!-- 216 for grid, 49 for plane, and 15 for manifold  -->

   <param name="num_kernel_rows" value="3"/>

   <param name="load_weights_from_file" value="false"/>
   <param name="weight_file" type="str" value="trial_1/opt_params/last_network_weights.txt"/>

   <param name="variance" value="0.0005"/>  <!-- 4 for grid, and 0.001 for pland and manifold -->
   <!--param name="variance" value="4"/-->  
   <!-- <param name="variance" value="2"/>   -->

   <param name="num_policies" value="2"/> <!-- 3 for grid, 2 for plane, and 1 for manifold -->
   <param name="num_dim" value="3"/> <!-- 3 for grid, and 2 for plane and manifold -->

   <param name="use_corr_noise" type="bool" value="true"/>
   <param name="burn_in_trials" value="7"/>
   <param name="max_num_samples" value="5"/>
   <param name="relative_path" type="str" value="$(find grasp_learning)/stored_data/data/"/>

   <param name="spacing_policy" type="str" value="manifold"/> <!-- possibilities grid, plane, and manifold -->

   <param name="grid_x" value="0.7"/>
   <param name="grid_y" value="0.7"/>
   <param name="grid_z" value="0.5"/>

   <param name="convergance_treshold" value="0.8"/> <!-- 0.42 for plane and 0.6 for manifold  -->

 </node>

 <!-- launch the grasp_learning node -->
 <node name="demo_learn_manifold" pkg="grasp_learning" type="demo_learn_manifold" respawn="false" output="screen" >
   <param name="with_gazebo" type="bool" value="true"/>
   <param name="decay_rate" type="double" value="4"/>

   <!-- The execution time for on rollout -->
   <param name="exec_time" type="double" value="2"/> 

   <!-- The hight and radius of the grasping manifold is specified here. This is then propageted to the RBF network-->
   <param name="manifold_height" value="0.12"/>
   <param name="manifold_radius" value="0.05"/>
      <!--rosparam param="manifold_pos"> [0.35, 0, 0.15]</rosparam-->

   <rosparam param="manifold_pos"> [0.3, -0.05, 0.04]</rosparam>

   <param name="object_radius" value="0.02"/>

   <rosparam param="PC_of_object"> [1, 0, 0, 0.3, -0.05, 0.2]</rosparam> 

   <param name="nullspace" type="bool" value="true"/>

   <param name="task" type="str" value="manifold"/> <!-- value: manifold or plane -->

   <param name="relative_path" type="str" value="$(find grasp_learning)/stored_data/data/"/>

   <param name="max_num_trials" type="int" value="10"/>

   <param name="max_rollouts_per_trial" type="int" value="300"/>

 </node>

  <node name="run_demo_node" pkg="grasp_learning" type="run_demo_node">
    <param name="max_rollouts" type="double"  value="60" />
  </node>

</launch>
