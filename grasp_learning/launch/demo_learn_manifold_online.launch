<?xml version="1.0"?>
<launch>

  <arg name="controllers" default="joint_state_controller hqp_vel_controller"/>
  <arg name="hardware_interface" default="VelocityJointInterface"/>

  <rosparam file="$(find demo_grasping)/hqp_tasks/task_definitions.yaml" command="load" ns="/yumi"/>

  <!-- LAUNCH IMPLEMENTATION -->
  <include file="$(find yumi_demo_launch)/launch/yumi_online_hqp.launch">
    <arg name="controllers" value="$(arg controllers)"/>
    <arg name="hardware_interface" value="$(arg hardware_interface)"/>
  </include>


  <node name="RBFNetwork" pkg="grasp_learning" type="RBFNetwork" output="screen" launch-prefix="terminator -mx">

   <param name="num_kernels" value="15"/>
   <param name="num_kernel_rows" value="1"/>

   <!-- <param name="variance" value="0.0001"/> -->
   <param name="variance" value="0.001"/>
   <!-- <param name="variance" value="0.01"/> -->

   <param name="num_policies" value="1"/>
   <param name="num_dim" value="2"/>
   <param name="use_corr_noise" type="bool" value="false"/>
   <param name="burn_in_trials" value="8"/>
   <param name="max_num_samples" value="5"/>
   <param name="relative_path" type="str" value="$(find grasp_learning)/stored_data/data/"/>

 </node>

 <!-- launch the grasp_learning node -->
 <node name="demo_learn_manifold" pkg="grasp_learning" type="demo_learn_manifold" respawn="false" output="screen" >
   <param name="with_gazebo" type="bool" value="false"/>
   <param name="generalize_policy" type="bool" value="false"/>
   <param name="decay_rate" type="double" value="4"/>
   <param name="exec_time" type="double" value="2"/>

   <param name="manifold_height" value="0.1"/>
   <param name="manifold_radius" value="0.06"/>
   <rosparam param="manifold_pos"> [0.35, 0, 0.15]</rosparam>
   <param name="object_radius" value="0.03"/>
   
   <!-- <rosparam param="final_pos"> [0.29, 0, 0.2]</rosparam> --> <!-- Upper  -->
   <!-- <rosparam param="final_pos"> [0.41, 0, 0.2]</rosparam> --> <!-- Bottom -->  
   <rosparam param="final_pos"> [0.2997, -0.0326, 0.2]</rosparam> <!-- Upper left corner -->
   <!-- <rosparam param="final_pos"> [0.394, -0.0598, 0.2]</rosparam> --> <!-- Bottom left corner -->

   <rosparam param="PC_of_object"> [1, 0, 0, 0, 0, 0.2]</rosparam> 
   <param name="relative_path" type="str" value="$(find grasp_learning)/stored_data/data/"/>

   <remap from="/close_gripper" to="/yumi/yumi_gripper/do_grasp"/>
   <remap from="/open_gripper" to="/yumi/yumi_gripper/release_grasp"/>

 </node>

 <node name="rviz" pkg="rviz" type="rviz" args="-d $(find grasp_learning)/launch/demo.rviz"/>

</launch>

